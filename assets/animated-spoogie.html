<!DOCTYPE html>
<html>
<head>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: transparent;
    width: 1920px;
    height: 1080px;
    overflow: hidden;
    position: relative;
    font-family: 'Comic Sans MS', 'Arial', sans-serif;
  }

  .car-container {
    position: absolute;
    width: 140px;
    height: 140px;
    transform-origin: center center;
    z-index: 100;
  }

  .car {
    width: 100%;
    height: 100%;
    object-fit: contain;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
  }

  /* Car bounce while driving */
  @keyframes carBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
  }

  .car.driving {
    animation: carBounce 0.15s ease-in-out infinite;
  }

  /* Exhaust fumes */
  .fume {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    opacity: 0.6;
    animation: fumeFloat 1.5s ease-out forwards;
  }

  @keyframes fumeFloat {
    0% {
      opacity: 0.7;
      transform: scale(0.5) translateX(0);
    }
    50% {
      opacity: 0.4;
    }
    100% {
      opacity: 0;
      transform: scale(2.5) translateX(-50px) translateY(-30px);
    }
  }

  /* Tire marks on ground */
  .tire-mark {
    position: absolute;
    width: 8px;
    height: 20px;
    background: rgba(30, 30, 30, 0.3);
    border-radius: 4px;
    pointer-events: none;
    animation: markFade 3s ease-out forwards;
  }

  @keyframes markFade {
    0% { opacity: 0.4; }
    100% { opacity: 0; }
  }

  /* Dust cloud when turning */
  .dust {
    position: absolute;
    width: 30px;
    height: 20px;
    background: radial-gradient(ellipse, rgba(180, 160, 130, 0.6) 0%, transparent 70%);
    border-radius: 50%;
    pointer-events: none;
    animation: dustPuff 0.8s ease-out forwards;
  }

  @keyframes dustPuff {
    0% { opacity: 0.8; transform: scale(0.5); }
    100% { opacity: 0; transform: scale(2) translateY(-20px); }
  }

  /* Speed lines */
  .speed-line {
    position: absolute;
    height: 3px;
    background: linear-gradient(to left, rgba(255,255,255,0.6), transparent);
    pointer-events: none;
    animation: speedFade 0.3s ease-out forwards;
  }

  @keyframes speedFade {
    0% { opacity: 0.8; width: 40px; }
    100% { opacity: 0; width: 0px; }
  }

  /* Speech bubble for dad jokes */
  .speech-bubble {
    position: absolute;
    background: white;
    border-radius: 20px;
    padding: 15px 20px;
    max-width: 300px;
    font-size: 18px;
    color: #333;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    animation: bubblePop 0.3s ease-out forwards;
    z-index: 200;
    text-align: center;
    line-height: 1.4;
  }

  .speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 30px;
    border-width: 15px 15px 0;
    border-style: solid;
    border-color: white transparent;
  }

  @keyframes bubblePop {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
  }

  @keyframes bubbleFade {
    0% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(0.8) translateY(-20px); }
  }

  /* Laugh emojis */
  .laugh {
    position: absolute;
    font-size: 24px;
    pointer-events: none;
    animation: laughFloat 1.5s ease-out forwards;
  }

  @keyframes laughFloat {
    0% { opacity: 1; transform: translateY(0) rotate(0deg); }
    100% { opacity: 0; transform: translateY(-80px) rotate(20deg); }
  }

  /* Vroom text */
  .vroom {
    position: absolute;
    font-size: 28px;
    font-weight: bold;
    color: #ff4444;
    text-shadow: 2px 2px 0 #000, -1px -1px 0 #000;
    pointer-events: none;
    animation: vroomFade 0.8s ease-out forwards;
  }

  @keyframes vroomFade {
    0% { opacity: 1; transform: scale(0.5); }
    30% { transform: scale(1.2); }
    100% { opacity: 0; transform: scale(1) translateX(30px); }
  }
</style>
</head>
<body>

<div class="car-container" id="car">
  <img class="car driving" src="file:///home/struktured/Pictures/eigoops-profile.png" alt="Eigoops Racing">
</div>

<script>
const car = document.getElementById('car');
const carImg = car.querySelector('.car');

// Scene bounds
const sceneWidth = 1920;
const sceneHeight = 1080;
const carSize = 140;

// Race track waypoints (oval-ish circuit around the screen)
const trackPoints = [
  { x: 200, y: 200 },
  { x: 960, y: 150 },
  { x: 1700, y: 200 },
  { x: 1750, y: 540 },
  { x: 1700, y: 850 },
  { x: 960, y: 900 },
  { x: 200, y: 850 },
  { x: 150, y: 540 },
];

// Dad jokes collection
const dadJokes = [
  "Why do race car drivers make bad comedians? Their jokes always go over everyone's head!",
  "I used to hate speed bumps, but I'm slowly getting over it.",
  "What do you call a dinosaur that crashes their car? Tyrannosaurus Wrecks!",
  "Why did the car apply for a job? It wanted to quit being exhausted!",
  "I'm reading a book about anti-gravity. It's impossible to put down!",
  "What kind of car does Yoda drive? A Toyoda!",
  "Why don't racing cars ever get cold? They're always running!",
  "What do you call a Ford Fiesta that ran out of gas? A Ford Siesta!",
  "I told my car a joke but it didn't laugh. Guess it was too tired.",
  "What's a car's favorite meal? Brake-fast!",
  "Why did the car break up with the road? Too many rough patches!",
  "What do you call a sleeping dinosaur? A dino-snore... VROOM!",
  "I'm on the road to success. It's under construction.",
  "Why do cars hate playing cards? They're always getting dealt bad hands!",
  "What did the traffic light say to the car? Don't look, I'm changing!",
  "I put my car in reverse. That really took me back!",
  "Why was the car so good at music? It had great exhaust notes!",
  "What do you call cheese that isn't yours? Nacho cheese! Now let's RACE!",
  "I tried to make a car pun but I ran out of gas.",
  "Why did the car go to therapy? Too much road rage!"
];

const laughEmojis = ['ðŸ˜‚', 'ðŸ¤£', 'ðŸ˜†', 'ðŸŽï¸', 'ðŸ’¨', 'ðŸ”¥', 'ðŸ'];

// State
let currentPoint = 0;
let x = trackPoints[0].x;
let y = trackPoints[0].y;
let angle = 0;
let speed = 6;
let fumeTimer = 0;
let jokeTimer = 0;
let jokeIndex = 0;
let isJoking = false;
let lapCount = 0;

// Shuffle jokes
function shuffleJokes() {
  for (let i = dadJokes.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [dadJokes[i], dadJokes[j]] = [dadJokes[j], dadJokes[i]];
  }
}
shuffleJokes();

function updatePosition() {
  const target = trackPoints[currentPoint];
  const dx = target.x - x;
  const dy = target.y - y;
  const dist = Math.sqrt(dx * dx + dy * dy);

  // Calculate target angle
  const targetAngle = Math.atan2(dy, dx) * (180 / Math.PI);

  // Smooth angle transition
  let angleDiff = targetAngle - angle;
  while (angleDiff > 180) angleDiff -= 360;
  while (angleDiff < -180) angleDiff += 360;
  angle += angleDiff * 0.1;

  // Move toward target
  if (dist < 50) {
    // Reached waypoint, go to next
    currentPoint = (currentPoint + 1) % trackPoints.length;
    if (currentPoint === 0) {
      lapCount++;
      createVroom(x, y - 30);
    }
    // Dust cloud on turn
    createDust(x, y + carSize/2);
  } else {
    // Move forward
    const moveX = (dx / dist) * speed;
    const moveY = (dy / dist) * speed;
    x += moveX;
    y += moveY;
  }

  // Apply position and rotation
  car.style.left = x + 'px';
  car.style.top = y + 'px';
  car.style.transform = `rotate(${angle + 90}deg)`;

  // Exhaust fumes constantly
  fumeTimer++;
  if (fumeTimer > 3) {
    createFume(x + carSize/2, y + carSize/2, angle);
    fumeTimer = 0;
  }

  // Speed lines when going fast
  if (Math.random() < 0.3) {
    createSpeedLine(x + carSize/2, y + carSize/2, angle);
  }

  // Tire marks occasionally
  if (Math.random() < 0.1) {
    createTireMark(x + carSize/2, y + carSize);
  }

  // Joke timing
  jokeTimer++;
  if (jokeTimer > 400 && !isJoking && Math.random() < 0.02) {
    tellJoke();
    jokeTimer = 0;
  }

  requestAnimationFrame(updatePosition);
}

function createFume(fx, fy, carAngle) {
  const fume = document.createElement('div');
  fume.className = 'fume';

  // Position behind the car based on angle
  const behindAngle = (carAngle + 90) * (Math.PI / 180);
  const offsetX = Math.cos(behindAngle) * -50;
  const offsetY = Math.sin(behindAngle) * -50;

  const size = 15 + Math.random() * 20;
  fume.style.width = size + 'px';
  fume.style.height = size + 'px';
  fume.style.left = (fx + offsetX + (Math.random() - 0.5) * 20) + 'px';
  fume.style.top = (fy + offsetY + (Math.random() - 0.5) * 20) + 'px';
  fume.style.background = `radial-gradient(circle, rgba(100,100,100,0.7) 0%, rgba(60,60,60,0.3) 50%, transparent 70%)`;

  document.body.appendChild(fume);
  setTimeout(() => fume.remove(), 1500);
}

function createSpeedLine(sx, sy, carAngle) {
  const line = document.createElement('div');
  line.className = 'speed-line';

  const behindAngle = (carAngle + 90) * (Math.PI / 180);
  const offsetX = Math.cos(behindAngle) * -60;
  const offsetY = Math.sin(behindAngle) * -60;

  line.style.left = (sx + offsetX) + 'px';
  line.style.top = (sy + offsetY + (Math.random() - 0.5) * 40) + 'px';
  line.style.transform = `rotate(${carAngle + 90}deg)`;

  document.body.appendChild(line);
  setTimeout(() => line.remove(), 300);
}

function createTireMark(tx, ty) {
  const mark = document.createElement('div');
  mark.className = 'tire-mark';
  mark.style.left = (tx + (Math.random() - 0.5) * 30) + 'px';
  mark.style.top = ty + 'px';
  mark.style.transform = `rotate(${angle}deg)`;
  document.body.appendChild(mark);
  setTimeout(() => mark.remove(), 3000);
}

function createDust(dx, dy) {
  for (let i = 0; i < 5; i++) {
    const dust = document.createElement('div');
    dust.className = 'dust';
    dust.style.left = (dx + (Math.random() - 0.5) * 40) + 'px';
    dust.style.top = (dy + Math.random() * 20) + 'px';
    document.body.appendChild(dust);
    setTimeout(() => dust.remove(), 800);
  }
}

function createVroom(vx, vy) {
  const vroom = document.createElement('div');
  vroom.className = 'vroom';
  vroom.textContent = 'VROOM! ðŸ';
  vroom.style.left = vx + 'px';
  vroom.style.top = vy + 'px';
  document.body.appendChild(vroom);
  setTimeout(() => vroom.remove(), 800);
}

function tellJoke() {
  isJoking = true;
  speed = 2; // Slow down while telling joke

  const bubble = document.createElement('div');
  bubble.className = 'speech-bubble';
  bubble.textContent = dadJokes[jokeIndex];
  jokeIndex = (jokeIndex + 1) % dadJokes.length;

  bubble.style.left = Math.min(Math.max(x - 80, 20), sceneWidth - 350) + 'px';
  bubble.style.top = Math.max(y - 120, 20) + 'px';

  document.body.appendChild(bubble);

  // Laughing emojis
  setTimeout(() => {
    for (let i = 0; i < 3; i++) {
      setTimeout(() => {
        createLaugh(x + carSize/2 + (Math.random() - 0.5) * 100, y - 20);
      }, i * 200);
    }
  }, 1500);

  setTimeout(() => {
    bubble.style.animation = 'bubbleFade 0.5s ease-out forwards';
    setTimeout(() => {
      bubble.remove();
      isJoking = false;
      speed = 6; // Resume normal speed
    }, 500);
  }, 4000);
}

function createLaugh(lx, ly) {
  const laugh = document.createElement('div');
  laugh.className = 'laugh';
  laugh.textContent = laughEmojis[Math.floor(Math.random() * laughEmojis.length)];
  laugh.style.left = lx + 'px';
  laugh.style.top = ly + 'px';
  document.body.appendChild(laugh);
  setTimeout(() => laugh.remove(), 1500);
}

// Start animation
updatePosition();

// Tell first joke after 5 seconds
setTimeout(() => {
  tellJoke();
  jokeTimer = 0;
}, 5000);
</script>
</body>
</html>
